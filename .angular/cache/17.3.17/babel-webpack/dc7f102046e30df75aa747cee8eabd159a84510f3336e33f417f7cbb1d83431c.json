{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, ReactiveFormsModule } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatButtonModule } from '@angular/material/button';\nimport { ContratosApi } from '../../../shared/services/contratos.api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/material/form-field\";\nimport * as i4 from \"@angular/material/select\";\nimport * as i5 from \"@angular/material/core\";\nimport * as i6 from \"@angular/material/input\";\nimport * as i7 from \"@angular/material/table\";\nimport * as i8 from \"@angular/material/button\";\nconst _c0 = () => [];\nconst _c1 = () => [\"nome\"];\nfunction FiscalizacaoStepComponent_form_0_mat_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const a_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", a_r3);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(a_r3.nome);\n  }\n}\nfunction FiscalizacaoStepComponent_form_0_th_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 13);\n    i0.ɵɵtext(1, \"Acordo\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FiscalizacaoStepComponent_form_0_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const a_r4 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(a_r4.nome);\n  }\n}\nfunction FiscalizacaoStepComponent_form_0_tr_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 15);\n  }\n}\nfunction FiscalizacaoStepComponent_form_0_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 16);\n  }\n}\nfunction FiscalizacaoStepComponent_form_0_ng_container_12_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 20)(1, \"mat-form-field\", 2)(2, \"mat-label\");\n    i0.ɵɵtext(3, \"Descri\\u00E7\\u00E3o da Glosa\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-form-field\", 2)(6, \"mat-label\");\n    i0.ɵɵtext(7, \"Acordo Id\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function FiscalizacaoStepComponent_form_0_ng_container_12_div_2_Template_button_click_9_listener() {\n      const i_r7 = i0.ɵɵrestoreView(_r6).index;\n      const ctx_r1 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r1.removeGlosa(i_r7));\n    });\n    i0.ɵɵtext(10, \"Remover\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const i_r7 = ctx.index;\n    i0.ɵɵproperty(\"formGroupName\", i_r7);\n  }\n}\nfunction FiscalizacaoStepComponent_form_0_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 17);\n    i0.ɵɵtemplate(2, FiscalizacaoStepComponent_form_0_ng_container_12_div_2_Template, 11, 1, \"div\", 18);\n    i0.ɵɵelementStart(3, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function FiscalizacaoStepComponent_form_0_ng_container_12_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r1 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r1.addGlosa());\n    });\n    i0.ɵɵtext(4, \"Adicionar Glosa\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const glosas_r8 = ctx.ngIf;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", glosas_r8.controls);\n  }\n}\nfunction FiscalizacaoStepComponent_form_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 1)(1, \"mat-form-field\", 2)(2, \"mat-label\");\n    i0.ɵɵtext(3, \"Acordos m\\u00EDnimos de servi\\u00E7o\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-select\", 3);\n    i0.ɵɵlistener(\"selectionChange\", function FiscalizacaoStepComponent_form_0_Template_mat_select_selectionChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onSelectAcordo($event.value));\n    });\n    i0.ɵɵtemplate(5, FiscalizacaoStepComponent_form_0_mat_option_5_Template, 2, 2, \"mat-option\", 4);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"table\", 5);\n    i0.ɵɵelementContainerStart(7, 6);\n    i0.ɵɵtemplate(8, FiscalizacaoStepComponent_form_0_th_8_Template, 2, 0, \"th\", 7)(9, FiscalizacaoStepComponent_form_0_td_9_Template, 2, 1, \"td\", 8);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵtemplate(10, FiscalizacaoStepComponent_form_0_tr_10_Template, 1, 0, \"tr\", 9)(11, FiscalizacaoStepComponent_form_0_tr_11_Template, 1, 0, \"tr\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, FiscalizacaoStepComponent_form_0_ng_container_12_Template, 5, 1, \"ng-container\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const g_r9 = ctx.ngIf;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", g_r9);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.acordos);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"dataSource\", g_r9.value.acordos || i0.ɵɵpureFunction0(6, _c0));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"matHeaderRowDef\", i0.ɵɵpureFunction0(7, _c1));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"matRowDefColumns\", i0.ɵɵpureFunction0(8, _c1));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", g_r9.get(\"glosas\"));\n  }\n}\nexport let FiscalizacaoStepComponent = /*#__PURE__*/(() => {\n  class FiscalizacaoStepComponent {\n    constructor() {\n      this.api = inject(ContratosApi);\n      this.fb = inject(FormBuilder);\n      this.acordos = [];\n    }\n    get glosas() {\n      return this.group.get('glosas');\n    }\n    ngOnInit() {\n      this.api.listAcordosMinimos().subscribe(a => this.acordos = a);\n      const g = this.group;\n      if (g && !g.get('glosas')) {\n        g.addControl('glosas', this.fb.array([]));\n      }\n      if (g && !g.get('acordos')) {\n        g.addControl('acordos', this.fb.control([]));\n      }\n    }\n    onSelectAcordo(a) {\n      const arr = this.group.get('acordos');\n      const value = arr?.value || [];\n      arr.setValue([...value, a]);\n    }\n    addGlosa() {\n      this.glosas.push(this.fb.group({\n        descricaoGlosa: [''],\n        acordoId: [null]\n      }));\n    }\n    removeGlosa(i) {\n      this.glosas.removeAt(i);\n    }\n    static {\n      this.ɵfac = function FiscalizacaoStepComponent_Factory(t) {\n        return new (t || FiscalizacaoStepComponent)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: FiscalizacaoStepComponent,\n        selectors: [[\"app-fiscalizacao-step\"]],\n        inputs: {\n          group: \"group\"\n        },\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 1,\n        vars: 1,\n        consts: [[\"class\", \"grid\", 3, \"formGroup\", 4, \"ngIf\"], [1, \"grid\", 3, \"formGroup\"], [\"appearance\", \"outline\"], [3, \"selectionChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"mat-table\", \"\", 1, \"mat-elevation-z1\", 3, \"dataSource\"], [\"matColumnDef\", \"nome\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [4, \"ngIf\"], [3, \"value\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [\"formArrayName\", \"glosas\", 1, \"grid\"], [\"class\", \"glosa\", 3, \"formGroupName\", 4, \"ngFor\", \"ngForOf\"], [\"mat-stroked-button\", \"\", \"color\", \"primary\", 3, \"click\"], [1, \"glosa\", 3, \"formGroupName\"], [\"matInput\", \"\", \"formControlName\", \"descricaoGlosa\"], [\"matInput\", \"\", \"type\", \"number\", \"formControlName\", \"acordoId\"], [\"mat-button\", \"\", \"color\", \"warn\", 3, \"click\"]],\n        template: function FiscalizacaoStepComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, FiscalizacaoStepComponent_form_0_Template, 13, 9, \"form\", 0);\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", ctx.group);\n          }\n        },\n        dependencies: [CommonModule, i1.NgForOf, i1.NgIf, ReactiveFormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NumberValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i2.FormGroupName, i2.FormArrayName, MatFormFieldModule, i3.MatFormField, i3.MatLabel, MatSelectModule, i4.MatSelect, i5.MatOption, MatInputModule, i6.MatInput, MatTableModule, i7.MatTable, i7.MatHeaderCellDef, i7.MatHeaderRowDef, i7.MatColumnDef, i7.MatCellDef, i7.MatRowDef, i7.MatHeaderCell, i7.MatCell, i7.MatHeaderRow, i7.MatRow, MatButtonModule, i8.MatButton],\n        styles: [\".grid[_ngcontent-%COMP%]{display:grid;gap:12px}.glosa[_ngcontent-%COMP%]{display:grid;gap:8px;grid-template-columns:1fr 1fr auto;align-items:center}\"]\n      });\n    }\n  }\n  return FiscalizacaoStepComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}